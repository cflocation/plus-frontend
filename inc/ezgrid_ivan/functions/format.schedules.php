<?php function schedules($arrData,$timezone){	$arrStation = array();    	if(!empty($arrData)) {		    foreach($arrData['response']['docs'] as $key => $response) {	        $start_time 	= 	explode('T',$response['tz_start_'.$timezone]);	        $startT 		= 	explode(':',trim($start_time[1]));		       /* if(trim($startT[1])>30 && trim($startT[1])!=00) {	            $time1 = trim($startT[0]).':30';	        }	        else{ 	        		if(trim($startT[1])<30 && trim($startT[1])!=00) {	            	$time1 = (trim($startT[0])-1).':00';	        		}			         else {	            	$time1 = trim($startT[0]).':'.trim($startT[1]);		         }		     }		     	        $time1 	= trim($startT[0]).':'.trim($startT[1]); */	        			 switch(trim($startT[1])){			 	case (trim($startT[1])> 52 && trim($startT[1]) <= 59):					$time1 = (trim($startT[0])+1).':00';				 	break;				 				 	case (trim($startT[1])> 37 && trim($startT[1]) < 53): 					$time1 = (trim($startT[0])).':45';			 					 	break;			 	case (trim($startT[1])> 22 && trim($startT[1]) < 38): 					$time1 = (trim($startT[0])).':30';			 					 	break;			 	case (trim($startT[1])> 7 && trim($startT[1]) < 23): 					$time1 = (trim($startT[0])+1).':15';			 					 	break;			 	case (trim($startT[1])>= 00 && trim($startT[1]) < 8): 					$time1 = trim($startT[0]).':00';			 					 	break;			 }			        	        	        	        	        	        $end_time = explode('T',$response['tz_end_'.$timezone]);	        $endT 		= explode(':',trim($end_time[1]));				 switch(trim($endT[1])){			 	case (trim($endT[1])> 52 && trim($endT[1]) <= 59):										if(trim($endT[0])< 23){						$time2 = (trim($endT[0])+1).':00';					}					else{						$time2 = '24:00';										}				 	break;			 	case (trim($endT[1])> 37 && trim($endT[1]) < 53): 					$time2 = (trim($endT[0])).':45';			 					 	break;			 	case (trim($endT[1])> 22 && trim($endT[1]) < 38): 					$time2 = (trim($endT[0])).':30';			 					 	break;			 	case (trim($endT[1])> 7 && trim($endT[1]) < 23): 					$time2 = (trim($endT[0])+1).':15';			 					 	break;			 	case (trim($endT[1])>= 00 && trim($endT[1]) < 8): 					$time2 = trim($endT[0]).':00';				 	break;			 }					 	        /*if(trim($endT[0])!=00) {	            if(trim($endT[1])>30 && trim($endT[1])!=00) {	                $time2 = trim($endT[0]).':30';	            }	            else{ 	            	if(trim($endT[1])<30 && trim($endT[1])!=00) {	                	$time2 = (trim($endT[0])-1).':00';	            	}	            	else {	                $time2 = trim($endT[0]).':'.trim($endT[1]);	            	}	            }	        }	        else {	            $time2 = '24:00';	        }*/	        	        $timeDiff 	= getTimeDiff($time1,$time2);	        $diffTime 	= explode(':',$timeDiff);	        $rowspan 		= trim($diffTime[0])*2;	        	        if(trim($diffTime[1])	!=	'00') {	            $rowspan += 1;	        }	        	        $arrStation[$start_time[0]][date('h:i A',strtotime($time1))][] = date('h:i A',strtotime($time1));	        $arrStation[$start_time[0]][date('h:i A',strtotime($time1))][] = date('h:i A',strtotime($time2));	        $arrStation[$start_time[0]][date('h:i A',strtotime($time1))]['desc'] = isset($response['descembed']) ? $response['descembed'] : '';	        $arrStation[$start_time[0]][date('h:i A',strtotime($time1))]['episode'] = isset($response['epititle']) ? $response['epititle'] : '';	        $arrStation[$start_time[0]][date('h:i A',strtotime($time1))]['isnew'] = isset($response['isnew']) ? $response['isnew'] : '';   	        $arrStation[$start_time[0]][date('h:i A',strtotime($time1))]['genre'] = isset($response['isnew']) ? $response['genre1'] : '';	        $arrStation[$start_time[0]][date('h:i A',strtotime($time1))]['live'] = isset($response['live']) ? $response['live'] : '';	        $arrStation[$start_time[0]][date('h:i A',strtotime($time1))]['premierefinale'] = isset($response['premierefinale']) ? $response['premierefinale'] : '';	        $arrStation[$start_time[0]][date('h:i A',strtotime($time1))]['title'] = isset($response['title']) ? $response['title'] : '';	        $arrStation[$start_time[0]][date('h:i A',strtotime($time1))]['row'] = $rowspan;	    }	}		return($arrStation); }
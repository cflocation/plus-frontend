<?phpfunction query($edate,$etime,$sdate,$stime,$stationnum,$timezone){//Fixing Solr Query$servicecall = "http://solr.showseeker.net:8983/solr/gracenote/select/?q=*%3A*&version=2.2&start=0&indent=on&wt=json&fq=projected:0";$servicecall = $servicecall."&fq=-sort:%22Paid%20Programming%22&fq=-genre1:%22consumer%22";$servicecall = $servicecall."&fq=-genre2:%22consumer%22&rows=5000";$servicecall = $servicecall."&fq=map(tz_start_".$timezone.":[".date('Y-m-d',strtotime($sdate))."T00:00:00Z%20TO%20";$servicecall = $servicecall.date('Y-m-d',strtotime($edate))."T23:59:59Z])";$servicecall = $servicecall."&fq=start_".$timezone.":[".$stime."%20TO%20".$etime."]";$servicecall = $servicecall."&fq=stationnum:".$stationnum."+&fl=id,epititle,genre1,genre2,descembed,showtype,stationnum,";$servicecall = $servicecall."projected,callsign,search,stars,showid,isnew,tmsid,stationnum,title,new,";$servicecall = $servicecall."epititle,orgairdate,live,stationname,duration,premierefinale,tz_start_".$timezone.",start_";$servicecall = $servicecall.$timezone.",day_".$timezone.",tz_end_".$timezone."";//Querying Solr$json_data	= file_get_contents($servicecall);// print_r($servicecall);// exit;//Passign back JSON datareturn json_decode($json_data,true);}?>
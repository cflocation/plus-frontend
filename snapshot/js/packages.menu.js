function packages_menu(){		var url = '/services/1.0/packages.menu.php';    $.when(buildToken(url)).done(function(token){		url = token['url'];  		$.getJSON(url,function(data){			$.each(data,function(i, value){				if(value['latest'] != null){					$('#package'+value['packageid']).append('<BR><div class=updatedpackage>Updated '+value['latest']+'</div><span class=pknets style=display:none>'+value['stations']+'</span>');				}else if(value['updated'] != null){					$('#package'+value['packageid']).append('<BR><div class=updatedpackage>Updated '+value['updated']+'</div><span class=pknets style=display:none>'+value['stations']+'</span>');				}else{					$('#package'+value['packageid']).append('<BR><div class=updatedpackage>Updated '+value['created']+'</div><span class=pknets style=display:none>'+value['stations']+'</span>');				}			});		});			});			}function check_packages(networks){	$('.package-menu').show();	var hiddenPackages = [];	$.each($('.pknets'),function(j,package){		var packagenets = $(this).text();		var cnt = 0;		$.each(networks,function(i,net){			if(String(packagenets).indexOf(net.id) != -1){				cnt++;				return false;			}		});		if(cnt == 0){			$(this).closest('.package-menu').hide();			hiddenPackages.push($(this).parent('a').prop('id'));		}	});	displayBanner(hiddenPackages);}function displayBanner(packages){	var popClass = $('#popupwindow').attr('class');	if ($.cookie('popup_user_login') != 'yes') {						if($.inArray(popClass, packages) == -1){			$('#popupwindow').show('slide', {direction: 'right'}, 2000);		}				$('#imagepopup, #fan-exit').click(function(){			$('#popupwindow').stop().fadeOut('medium');});		$.cookie('popup_user_login', 'yes', { path: '/', expires: 1 });	}	closeBanner();}function closeBanner(){	var xSeconds = 20000; // 1 second	setTimeout(function() {		$('#popupwindow').fadeOut('fast');		$('#popupwindow').hide();	}, xSeconds);		}
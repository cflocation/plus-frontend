function packages_menu(){	var url = apiUrl+'plus/package-menu';	$.getJSON(url,function(data){		$.each(data.packages,function(i, value){			var innHtml = value['name']+'<BR><div class=updatedpackage>Updated '+value['latest']+'</div><span class=pknets style=display:none>'+value['stations']+'</span>';			var jsSafeName = encodeURIComponent(value['name'].replace(/'/g, "\\'").replace(/'"/g, '\\"'));			$('#package-menu').append('<li class="package-menu"><a href="javascript:dialogDisclaimerNew('+value['packageid']+',\''+  jsSafeName +'\');" id="package-'+value['packageid']+'">'+innHtml+'</a></li>');		});		check_packages(datagridNetworks.dataSet());			});}function check_packages(networks){	$('.package-menu').show();	var hiddenPackages = [];	var packagenets,cnt;	$.each($('.pknets'),function(j,package){		packagenets = $(this).text();		cnt 		= 0;		$.each(networks,function(i,net){			if(String(packagenets).indexOf(net.id) != -1){				cnt++;				return false;			}		});		if(cnt == 0){			$(this).closest('.package-menu').hide();			hiddenPackages.push($(this).parent('a').prop('id'));		}	});	displayBanner(hiddenPackages);}function displayBanner(packages){	var popClass = $('#popupwindow').attr('class');	if ($.cookie('popup_user_login') != 'yes') {						if($.inArray(popClass, packages) == -1){			$('#popupwindow').show('slide', {direction: 'right'}, 2000);		}				$('#imagepopup, #fan-exit').click(function(){			$('#popupwindow').stop().fadeOut('medium');});		$.cookie('popup_user_login', 'yes', { path: '/', expires: 1 });	}	closeBanner();}function closeBanner(){	var xSeconds = 20000; // 1 second	setTimeout(function() {		$('#popupwindow').fadeOut('fast');		$('#popupwindow').hide();	}, xSeconds);		}
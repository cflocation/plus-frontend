<?php	//include_once('../../config/database.php');?><html>	<head>		<link rel="stylesheet" href="css/xml.error.lines.css?r=<?php print $uuid; ?>">	</head>	<body>			<div style="font-weight: 700; padding-left:20px; padding-right: 10px; font-size: 13px;">				<br/>				<center>					<span class="ui-state-error ui-corner-all" style="padding: 4px; font-weight: 500 !important;">						<i class="fa fa-exclamation-triangle"></i> 						Lines from 12:00 am until 4:59 am are not allowed in the Proposal XML code.					</span>				</center>				<br />				The lines outlined below cannot be exported and must be removed to continue, or you can choose to download to another format.			</div>			<br/>			<div style=" max-height:260px;  overflow-y: scroll; border-bottom: solid 1px #dddddd;">				<table class="errorlines" cellspacing="0" cellpadding="7">					<thead>						<tr>							<th >Net</th>							<th>Title</th>							<th>Start Date</th>							<th>End Date</th>							<th>Start Time</th>							<th>End Time</th>							<th>Rate</th>							<th>Spots</th>							<th>Total</th>						</tr>					</thead>					<tbody id="xml-lines"></tbody>				</table>			</div>			<br/>			<div style="height: 150px; -webkit-transform-style: preserve-3d;  -moz-transform-style: preserve-3d;  transform-style: preserve-3d; padding-bottom: 5px;">				<div style="float: left; width: 50%;   position: relative;   top: 50%;  -webkit-transform: translateY(-50%);  -ms-transform: translateY(-50%);  transform: translateY(-50%);">					<table  cellspacing="0" cellpadding="7" width="220px"  style="padding:5px; border: solid 1px maroon;" align="center">						<tbody id="totalsfromlines">							<tr><td class="totals">Lines to be removed :</td><td id="ttl-lines"  class="totals ralign"></td></tr>							<tr><td class="totals" >Spots to be removed :</td><td id="ttl-spots"  class="totals ralign"></td></tr>							<tr><td class="totals">Amount to be removed:</td><td id="ttl-cost"   class="totals ralign"></td></tr>																</tbody>					</table>				</div>				<div style="float: left; width: 50%;">										<table  cellspacing="0" cellpadding="5" width="220px" align="center">						<tr>							<td align="center" style="font-weight: 700; font-size: 10pt;">Please select one option:</td>						</tr>						<tr>							<td align="center"><button class="btn-green" id="xml-btn-go" style="width: 180px;">Delete Lines and<br />continue to Download</button></td>						</tr>						<tr>							<td align="center"><button class="btn-blue" id="xml-btn-back" style="width: 180px;">Delete Lines and <br />return to proposal</button></td>						</tr>						<tr>							<td align="center"><button class="btn-red" id="xml-btn-cancel" style="width: 180px;">Cancel and <br />return to proposal</button></td>						</tr>					</table>				</div>			</div>	</body>	<script>				$(document).ready(function(){			$('#xml-btn-cancel,#xml-btn-back,#xml-btn-go').button();						var ttlspots= 0;			var ttlcost= 0;			var zn = '';			var title = '';								xmllines.sort(SortByZone);				$.each(xmllines,function(i,val){				if(zn != val.zone){					var xml_line = $("<tr><td colspan=9 style='background-color: #ccffcc; font-weight:700;'>Zone: "+val.zone+"</td></tr>").appendTo($('#xml-lines'));					zn = val.zone;				}				var xml_line = $("<tr />");				st = Date.parse('01/01/2016 '+ val.starttime).toString("HH:mm");					et = Date.parse('01/01/2016 '+ val.endtime).toString("HH:mm");					title = String(val.title).substr(0, 50);								$("<td class=xml />").html(val.callsign).appendTo(xml_line);				$("<td class=xml fixTd/>").html(title).appendTo(xml_line);				$("<td class=xml />").html(Date.parse(val.startdate).toString('MM/dd/yyyy')).appendTo(xml_line);				$("<td class=xml />").html(Date.parse(val.enddate).toString('MM/dd/yyyy')).appendTo(xml_line);								//if(st > '00:00' && st < '05:00')					$("<td class='xml cred' />").html(val.starttime).appendTo(xml_line);				//else				//	$("<td class='xml' />").html(val.starttime).appendTo(xml_line);													//if(et > '00:00' && et < '05:00')					$("<td class='xml cred' />").html(val.endtime).appendTo(xml_line);				//else				//	$("<td class='xml' />").html(val.endtime).appendTo(xml_line);												$("<td class=xml ralign />").html(accounting.formatMoney(val.rate)).appendTo(xml_line);				$("<td class=xml />").html(val.spots).appendTo(xml_line);				$("<td class=xml ralign />").html(accounting.formatMoney(val.total)).appendTo(xml_line);				ttlspots= ttlspots+val.spots;				ttlcost = ttlcost+val.total;				xml_line.appendTo("#xml-lines");			});						$('<span class="removed" id="ttl-lines-off">'+xmllines.length+'</span>').appendTo($('#ttl-lines'));			$('<span class="removed" id="ttl-spots-off">'+ttlspots+'</span>').appendTo($('#ttl-spots'));			$('<span class="removed" id="ttl-cost-off">'+accounting.formatMoney(ttlcost)+'</span>').appendTo($('#ttl-cost'));		});				$('#xml-btn-cancel').on("click",function(){			returnToProposalFromXML();			$('#dialog-window').dialog('destroy');		});				$('#xml-btn-back').on("click",function(){			var r = confirm("Do you really want to remove the lines shown");			if (r == true) {				datagridProposal.delOvernightLines(xmllines,'0');			} 		});				$('#xml-btn-go').on("click",function(){			var r = confirm("Do you really want to remove the lines shown");			if (r == true) {				datagridProposal.delOvernightLines(xmllines,'1');			} 		});								function SortByZone(a, b){		  var aName = a.zone.toLowerCase()+a.callsign.toLowerCase()+a.startdate.toLowerCase();		  var bName = b.zone.toLowerCase()+b.callsign.toLowerCase()+b.startdate.toLowerCase(); 		  return ((aName < bName) ? -1 : ((aName > bName) ? 1 : 0));		}	</script>
// ADD NEW PROPOSAL$('#ezNewProposal').on('click',function(){	var opt 		= {};	opt.show 		= {effect: "blind",duration: 1};	opt.width 		= 380;	opt.height		= 150;	opt.resizable	= false;	opt.modal 		= false;	opt.draggable	= true;	opt.title		= "ShowSeeker Plus Grids";	opt.dialogClass = "pepper";	opt.open 		= function(){$('#newProposalBtn,#cancelNewProposalBtn').button()}	$('#newProposalUI').dialog(opt);});	$('#newProposalBtn').on('click',function(){	newproposalname = $('#newProposal').val();	if(newproposalname !== ''){		$('#newProposalBtn').hide();		$('#newPslStatus').show();		$('#newProposal').val('');		sswin.blur();			sswin.datagridProposal.emptyGrid();		sswin.proposalCreateNew(newproposalname,true,'Grids');		resetCells();		pslIdCheck = self.setInterval(function(){			//loadedProposalId = sswin.proposalid;			//sswin.mixTrack("Grids - Proposal Add",{"proposalId":sswin.proposalid});			window.clearInterval(pslIdCheck);			window.focus();			//$('#proposalList').val(loadedProposalId).change();			$('#newPslStatus').hide();				$('#newProposalBtn').show();			$('#newProposalUI').dialog("close");			ratingsOn = false;		},1500);	}	else{		alertMsg('Proposal Name required.');	}});	//CLOSE SHOWDESCRIPTION$('#menu,#panelCloser').on('click', function(){	closeSidePanel();});	//GRID UPDATE$('#updategrid').on('click', function(){	updategrid();});	//DOWNLOAD PDF GRID $('#printPdfGrid').on('click', function(){	printGrid()});// ADD/REMOVE SHOWS TO PROPOSAL   //	 	$('.programmingArea').on('click', '.addShow', function(){		$thisShow = $(this);				if(parseInt($('#proposalList').val()) !== 0){		showid 		= new Array();		showid[0] 	= $thisShow.parents('.programCell').prop('id');		zoneid		= $('#zones').val();		zonename	= $('#zones option:selected').text();		var netId 	= $('#station').val();		//ADD SHOWS		if(!$thisShow.hasClass('fa-check-square')){			$thisShow.removeClass('fa-square-o').addClass('fa-check-square');			$thisShow.parents().eq(0).addClass('selectedShow');			sswin.externalAddLineToProposal(showid,zonename,zoneid);			sswin.mixTrack("Grids - Line Add",{"showId":showid,"networkId":netId,"proposalId":sswin.proposalid});		}//REMOVE SHOWS		else{			$thisShow.removeClass('fa-check-square').addClass('fa-square-o');			$thisShow.parents('div.cellText').removeClass('selectedShow');			try{				var validIds =[];				for(var indx=0; indx<showid.length; indx++){					if(showid[indx]){						validIds.push(showid[indx]);					}				}				sswin.mixTrack("Grids - Line Delete",{"showId":validIds,"networkId":netId,"proposalId":sswin.proposalid});								sswin.externalDeleteLineFromProposal(validIds,zoneid);			}			catch(e){}		}	}	else{		$(this).prop('checked', false);		alertMsg('Please Create a Proposal before adding shows.');		return;						}	return true;});	// SHOW DESCRIPTION$('#ezgridSchedules').on('click', '.programTitle', function(e){	//CLEAR PREV CARD	closeShowCard();	var $thisShow	= $(this);	var showId 		= $thisShow.parents('div.programCell').prop('id');	var cellHeight 	= $thisShow.parents('div.programCell').height();	var title 		= $thisShow.text();	if(showId === currentContainer){ //CLOSE SHOWCARD OR SMALL BOX		currentContainer = 0;		closeShowCard();		return;	}		currentContainer 	= showId;	if(!hideShowCard){			resetCard();		$('#showcard').dialog({				width:280,				height:500,				resizable: false,				modal: false,				draggable: true,				title: title,				dialogClass: "pepper",				open:function(){					loadShowcard(currentContainer);					sswin.mixTrack("Grids - Show Card",{"title":title});},				close:function(){resetCard()}});	}	else{		var w = $thisShow.parents().eq(5).prop('id');			openEpisodeBox(showId,cellHeight,w,$thisShow);		sswin.mixTrack("Grids - Show Description",{"title":title});		}	$thisShow.addClass('selectedEpisode');	$thisShow.parents().eq(0).addClass('highlightedCell');			return false;});		//DIALOGS TO CREATE ROTATORS{$('#addRotators').on('click',function(e){	$('#rotatorParams').dialog();});			//SELECTING A NEW PROPOSAL$("#proposalList").change(function(e){		var selectedPslId 	= $(this).val();		if(selectedPslId !== 0){		//CLEAN PREV RATINGS		$('.ratingsInfo').empty().remove();		$('#surveyInfo').hide();			clearGrids();		sswin.loadProposalFromServer(selectedPslId);		sswin.datagridProposalManager.setSelectRow(selectedPslId);		sswin.mixTrack("Grids - Proposal Select",{"proposalId":selectedPslId});	}});//MARKETS UPDATE$('#usrmarkets').change(function(){	var regionId = $(this).val();	isZoneUpdate = true;		sswin.$('#market-selector').val(regionId).change();	sswin.mixTrack("Grids - Region Select",{"regionId":regionId});});	//DMAS UPDATE$('#usrdmas').on('change',function(){	var dmaId = $(this).val();	isZoneUpdate = true;	sswin.$('#dma-selector').val(dmaId).change();	sswin.mixTrack("Grids - DMA Select",{"dmaId":dmaId});});// ZONE UPDATE$('#zones').on('change',function(){	var zoneId = $(this).val();	isZoneUpdate = true;	$('#zone-selector', sswin.document).val(zoneId);//.trigger('change');	sswin.zoneSelected();	sswin.mixTrack("Grids - Zone Select",{"zoneId":zoneId});	//$('#overlay').show();	});	//NETWORK UPDATE$('#station').on('change',function(){	var stationId 	= $(this).val();	var callsign 	= $('#station option:selected').text();	sswin.datagridNetworks.selectRowsFromData([{'id':$(this).val()}]);	sswin.mixTrack("Grids - Network Select",{"networkId":stationId,"callsign":callsign});});		//COLLAPSE / EXPAND GRID$('#monthlyView').on('change',function(){	if($(this).is(':checked')){		expandMonths();		sswin.mixTrack("Grids - Montly Navigation");	}	else{		collapseMonths();		sswin.mixTrack("Grids - Weekly Navigation");	}	closeSidePanel();});//TOGGLE SHOWCARD$('input:radio[name="showcardSetting"]').on('change',function(){	hideShowCard = false;	if(parseInt($(this).val()) < 1){		hideShowCard = true;		sswin.mixTrack("Grids - Showcards OFF");	}	else{		sswin.mixTrack("Grids - Showcards ON");	}	closeShowCard();	resetCard();	resetEpisodeBoxes();	sswin.userSettings.hideShowCards = hideShowCard;	sswin.saveUserSettings();});//WINDOW RESIZE$( window ).resize(function() {	setTimeout(		function(){			resetCard(); //CLEAR PREV CARD			closeShowCard();			resizeGrid();		}, 300);});//WEEK NAVIGATOR EFFECTS  UPDATES TAB NAVIGATOR BACKGROUND   //	$('#ezgridSchedules').on('click', '.ui-tabs-anchor', function(){	tabid  	= $(this).attr('id');	$(this).removeClass("activeWeek");	if(tabid.indexOf('ui' === -1)){		tabnum	= String(tabid).replace('w','');		updateBackground(tabid,tabnum);		setWeekNum(tabnum);		selectedTab = tabnum;		highlightTab();	}	closeShowCard();});				